(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fileupload"],a)
}else{a(window.jQuery)
}}(function(a){var b=a.blueimp.fileupload.prototype.options.add;
a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{processQueue:[],add:function(f,c){var d=a(this);
c.process(function(){return d.fileupload("process",c)
});b.call(this,f,c)
}},processActions:{},_processFile:function(f){var e=this,c=a.Deferred().resolveWith(e,[f]),d=c.promise();
this._trigger("process",null,f);
a.each(f.processQueue,function(g,h){var j=function(i){return e.processActions[h.action].call(e,i,h)
};d=d.pipe(j,h.always&&j)
});d.done(function(){e._trigger("processdone",null,f);
e._trigger("processalways",null,f)
}).fail(function(){e._trigger("processfail",null,f);
e._trigger("processalways",null,f)
});return d
},_transformProcessQueue:function(c){var d=[];
a.each(c.processQueue,function(){var f=this,e={},h=this.action,g=this.prefix===true?h:this.prefix;
a.each(this,function(i,j){if(a.type(j)==="string"&&j.charAt(0)==="@"){e[i]=c[j.slice(1)||(g?g+i.charAt(0).toUpperCase()+i.slice(1):i)]
}else{e[i]=j
}});d.push(e)
});c.processQueue=d
},processing:function(){return this._processing
},process:function(e){var d=this,c=a.extend({},this.options,e);
if(c.processQueue&&c.processQueue.length){this._transformProcessQueue(c);
if(this._processing===0){this._trigger("processstart")
}a.each(e.files,function(f,g){var i=f?a.extend({},c):c,h=function(){return d._processFile(i)
};i.index=f;
d._processing+=1;
d._processingQueue=d._processingQueue.pipe(h,h).always(function(){d._processing-=1;
if(d._processing===0){d._trigger("processstop")
}})})}return this._processingQueue
},_create:function(){this._super();
this._processing=0;
this._processingQueue=a.Deferred().resolveWith(this).promise()
}})}));